<?php 
function console_log( $data ){
  echo '<script>';
  echo 'console.log('. json_encode( $data ) .')';
  echo '</script>';
}

function add_avariable($varName, $var) {
	echo '<script>';
  echo 'var '.$varName.'='.json_encode( $var ).';';
  echo '</script>';	
}

function pointInPolygon($p, $polygon) {
    //if you operates with (hundred)thousands of points
    set_time_limit(60);
    $c = 0;
    $p1 = $polygon[0];
    $n = count($polygon);

    for ($i=1; $i<=$n; $i++) //any student need to go through this
    {
        $p2 = $polygon[$i % $n];
        if ($p->lng > min($p1->lng, $p2->lng)
            && $p->lng <= max($p1->lng, $p2->lng)
            && $p->lat <= max($p1->lat, $p2->lat)
            && $p1->lng != $p2->lng) 
        {
                $xinters = ($p->lng - $p1->lng) * ($p2->lat - $p1->lat) / ($p2->lng - $p1->lng) + $p1->lat;
                if ($p1->lat == $p2->lat || $p->lat <= $xinters) {
                    $c++;
                }
        }
        $p1 = $p2;
    }
    // if the number of edges we passed through is even, then it's not in the poly.
    return ($c%2 != 0);
}

function contains($point, $polygon)
{
    if($polygon[0] != $polygon[count($polygon)-1])
        $polygon[count($polygon)] = $polygon[0];
    $j = 0;
    $oddNodes = false;
    $x = $point->lng;
    $y = $point->lat;
    $n = count($polygon);
    for ($i = 0; $i < $n; $i++)
    {
        $j++;
        if ($j == $n)
        {
            $j = 0;
        }
        if ((($polygon[$i]->lat < $y) && ($polygon[$j]->lat >= $y)) || (($polygon[$j]->lat < $y) && ($polygon[$i]->lat >=
            $y)))
        {
            if ($polygon[$i]->lng + ($y - $polygon[$i]->lat) / ($polygon[$j]->lat - $polygon[$i]->lat) * ($polygon[$j]->lng -
                $polygon[$i]->lng) < $x)
            {
                $oddNodes = !$oddNodes;
            }
        }
    }
    return $oddNodes;
}

class Point {
    public $lat;
    public $lng;
    function Point($lat, $lng) {
        $this->lat = $lat;
        $this->lng = $lng;
    }
}

function get_distance($pos1, $pos2) {
	$p1 = $pos1[0].",".$pos1[1];
	$p2 = $pos2[0].",".$pos2[1];

	$cSession = curl_init(); 
	//step2
	curl_setopt($cSession,CURLOPT_URL,"https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".$p1."&destinations=".$p2."&key=AIzaSyAq_4lcmeuCIbZ288vbXMnYowGL-PO-lxk");
	//https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=39.3259308,-120.5963064&destinations=39.449047,-120.008887&key=AIzaSyAq_4lcmeuCIbZ288vbXMnYowGL-PO-lxk
	curl_setopt($cSession,CURLOPT_RETURNTRANSFER,true);
	curl_setopt($cSession,CURLOPT_HEADER, false); 
	//step3
	$result=curl_exec($cSession);
	$result = json_decode($result);
	return floatval($result->{'rows'}[0]->{'elements'}[0]->{'distance'}->{'value'});
}

$polygon = array();
$polygon['WA'] = [new Point(48.4656371, -124.82116699),
					new Point(48.23199134	,-123.4588623),
					new Point(48.98742701	,-123.2611084),
					new Point(49.00004203	,-117.03872681),
					new Point(46.37156925	,-117.05795288),
					new Point(46.006501	,-116.90963745),
					new Point(46.01222384, -118.97644043),

					new Point(45.93109505, -119.31632996),
					new Point(45.92058734, -119.585495),
					new Point(45.82401447, -119.92744446),
					new Point(45.69562905, -120.48774719),
					new Point(45.74644367, -120.61134338),
					new Point(45.74644367, -120.61134338),
					new Point(45.74644367, -120.61134338),
					new Point(45.74644367, -120.61134338),
					new Point(45.74644367, -120.61134338),
					];

$polygon['OR'] = [new Point(42.03297433, -124.28833008),
				new Point(42.01665184	,-117.05932617),
				new Point(43.84047017	,-117.02774048), 
				new Point(44.17629472	,-116.92337036),
				new Point(44.3965047	,-117.23373413),
				new Point(45.59866569	,-116.48254395),
				new Point(45.97406039	,-116.9329834),
				new Point(45.99696162	,-118.98742676),
				new Point(45.6370871	,-120.84411621),
				new Point(45.60635208	,-122.65960693),
				new Point(46.13797652	,-123.05511475),
				new Point(46.29381556	,-124.26361084),
				new Point(44.49650533, -125.2331543),
				new Point(43.08493743, -125.15075684)
				];


$polygon['ID'] = [new Point(48.99463598	,-117.03460693),
				new Point(48.99103163	,-116.0458374),
				new Point(47.97659313	,-116.04961395), 
				new Point(47.60986653	,-115.69290161), 
				new Point(47.47266287	,-115.63796997), 
				new Point(47.43366128	,-115.75881958),
				new Point(46.61171463	,-114.59014893),
				new Point(46.65697732	,-114.32647705),
				new Point(45.5063469	,-114.42810059),
				new Point(45.66780527	,-113.94470215),
				new Point(44.40239183	,-112.88452148),
				new Point(44.54350521, -111.08276367), 
				new Point(42.01665184, -111.06079102), 
				new Point(42.00440721, -117.02911377), 
				new Point(43.81867486, -117.03323364), 
				new Point(44.16693721, -116.89487457), 
				new Point(44.27765451, -117.20558167), 
				new Point(44.6627926, -117.09091187), 
				new Point(45.61019488, -116.45782471), 
				new Point(45.99409948, -116.91581726), 
				new Point(46.42697231, -117.03838348)
				];


$polygon['MT'] = [new Point(49.00184392	,-116.0458374),
				new Point(48.98382213	,-104.05975342),
				new Point(45.00365116	,-104.04876709), 
				new Point(45.00365116	,-111.05804443),
				new Point(44.47789074	,-111.05323792), 
				new Point(44.74965921,	-111.38420105),
				new Point(44.55329208,	-112.30979919),
				new Point(44.74965921,	-111.38420105),
				new Point(44.36313311,	-112.84194946),
				new Point(45.68123917,	-113.93783569),
				new Point(45.5217439,	-114.43634033),
				new Point(46.64755071,	-114.57778931),
				new Point(47.45595144,	-115.69290161),
				new Point(47.97337539, -116.04446411)
				];


$polygon['ND'] = [new Point(48.99643806,	-104.05151367),
				new Point(49.00049251	,-97.22969055),
				new Point(48.6818942	,-97.10403442), 
				new Point(48.57024657	,-97.15827942),
				new Point(47.93244654	,-97.03639984),
				new Point(47.58764168	,-96.86920166),
				new Point(46.84328581	,-96.77444458),
				new Point(46.65414951	,-96.79710388),
				new Point(46.33128388	,-96.60999298),
				new Point(46.05512627	,-96.55815125),
				new Point(45.93873577	,-96.56364441),
				new Point(45.94924003	,-104.04327393)				
				];



$polygon['WY'] = [new Point(44.99976702, -111.04705811),
				new Point(44.94924927, -104.05151367),
				new Point(40.98819156, -104.05700684), 
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127),
				new Point(41.00892074, -111.05255127)
				];

$polygon['UT'] = [new Point(41.99216023	,-114.03259277),
				new Point(41.99828402	,-111.04568481),
				new Point(40.99648401	,-111.04431152), 
				new Point(40.99855696	,-109.05166626), 
				new Point(37.0003592	,-109.04891968), 
				new Point(37.00693943	,-114.04907227)];

$polygon['NV'] = [new Point(41.98807738	,-119.99542236),
				new Point(41.98807738	,-114.05181885),
				new Point(36.20882309	,-114.04083252), 
				new Point(36.02244668	,-114.19944763), 
				new Point(36.14341987	,-114.39033508), 
				new Point(36.09127995, -114.74739075),
				new Point(35.14573999, -114.5716095),
				new Point(35.0131268, -114.64302063),
				new Point(39.0021103, -120.0050354)];

$polygon['CA'] = [new Point(42.03297433	,-124.25537109),
				new Point(41.90227704	,-119.99267578),
				new Point(38.99357206	,-119.9597168), 
				new Point(34.99400376	,-114.64508057),
				new Point(34.32075528	,-114.19464111),
				new Point(34.0435565	,-114.45831299),
				new Point(33.59174327	,-114.58465576),
				new Point(33.30298618	,-114.73846436),
				new Point(33.031693	,-114.69451904),
				new Point(32.93492867	,-114.46929932),
				new Point(32.7318409	,-114.5791626),
				new Point(32.39387758	,-118.5067749),
				new Point(34.81380332, -123.42041016),
				new Point(39.19820535, -125.92529297)];


$polygon['AZ'] = [new Point(36.97622678,	-114.05456543),
				new Point(37.00255267	,-109.05029297),
				new Point(31.33956286	,-109.04205322), 
				new Point(31.33956286	,-111.08001709),
				new Point(32.58384933	,-114.79064941),
				new Point(33.60089441	,-114.53933716),
				new Point(34.15727269	,-114.29489136),
				new Point(34.30686026	,-114.14297104),
				new Point(34.47146728	,-114.38621521),
				new Point(34.71621791	,-114.48749542),
				new Point(34.85663672	,-114.62104797),
				new Point(35.00075358	,-114.6320343),
				new Point(36.0113389	,-114.73983765),
				new Point(36.18887536	,-114.03671265)
				];


$polygon['CO'] = [new Point(41.01306579	,-109.02832031),
				new Point(40.91351258	,-102.06298828),
				new Point(37.0200982	,-101.98608398), 
				new Point(37.0200982	,-109.05029297)];

$polygon['NM'] = [new Point(36.96744946,	-109.07226562),
				new Point(37.00693943	,-103.00231934),
				new Point(36.50080532	,-103.0424881), 
				new Point(32.0057469	,-103.06137085),
				new Point(31.99759473, -106.62849426),
				new Point(31.78304953, -106.52961731),
				new Point(31.77954737, -108.20297241),
				new Point(31.33487103, -108.20846558),
				new Point(31.33428454, -109.049263)
				];

$polygon['SD'] = [new Point(45.93587062,	-104.04602051),
				new Point(45.93396044	,-96.56570435),
				new Point(45.61019488	,-96.84585571), 
				new Point(45.29324494	,-96.45240784),
				new Point(42.73087428	,-96.64672852),
				new Point(42.92425175	,-98.49243164),
				new Point(43.00464713	,-104.04602051)
				];


$polygon['NE'] = [new Point(43.00866414,	-104.05426025),
				new Point(43.00464713	,-98.5144043),
				new Point(42.48222557	,-96.43661499), 
				new Point(41.26542063	,-95.92987061),
				new Point(40.01078714	,-95.38879395),
				new Point(40.00657967	,-102.05337524),
				new Point(41.00062985	,-102.0602417),
				new Point(41.00270267	,-104.05563354)
				];


$polygon['KS'] = [new Point(40.01078714,	-102.05200195),
				new Point(39.9771201	,-95.32287598),
				new Point(39.15455749	,-94.5929718), 
				new Point(36.97622678	,-94.61975098),
				new Point(37.0200982, -102.05749512)];


$polygon['OK'] = [new Point(36.99816566,	-103.00506592),
				new Point(36.95867113	,-94.6307373),
				new Point(35.44724606	,-94.44122314), 
				new Point(33.87953701	,-95.50964355),
				new Point(33.80653803	,-96.53137207),
				new Point(34.12544757	,-98.5144043),
				new Point(34.565383	,-99.99481201),
				new Point(36.49197347	,-100.00030518),
				new Point(36.50080532	,-102.99545288)];


$polygon['TX'] = [new Point(36.49197347,	-102.97485352),
				new Point(36.47430676	,-100.01953125),
				new Point(34.55181137	,-99.9810791), 
				new Point(34.09815935	,-98.5446167),
				new Point(33.76316538	,-97.13424683),
				new Point(33.82479362	,-96.5272522),
				new Point(33.9251297	,-95.21575928),
				new Point(33.54139467	,-94.04022217),
				new Point(31.95216224	,-94.0045166),
				new Point(31.05293399	,-93.52935791),
				new Point(30.12612436	,-93.70513916),
				new Point(29.3773884	,-93.85345459),
				new Point(25.79989118	,-96.54785156),
				new Point(26.45090222	,-99.10766602),
				new Point(31.79355521	,-106.61132812),
				new Point(31.99875937	,-103.07922363)];

$polygon['MN'] = [new Point(48.99103163,	-97.22076416),
				new Point(46.91275096	,-96.8170166),
				new Point(43.49278281	,-96.47644043), 
				new Point(43.50075244	,-91.21673584),
				new Point(43.89591324	,-91.33621216),
				new Point(44.75453548	,-92.80975342),
				new Point(45.44278976	,-92.64633179),
				new Point(45.67932024	,-92.87979126),
				new Point(46.08275685	,-92.30026245),
				new Point(46.66545986	,-92.28858948),
				new Point(46.7492711	,-92.09907532),
				new Point(46.70596918	,-92.02079773),
				new Point(47.98992167	,-89.48913574),
				new Point(48.82133255	,-91.94458008),
				new Point(49.4109732	,-95.17456055)];

$polygon['IA'] = [new Point(43.51668854,	-96.47094727),
				new Point(43.43696597,	-91.15356445),
				new Point(41.94314875,	-90.1373291),
				new Point(40.4051307,	-91.41174316),
				new Point(40.59727063,	-91.70837402),
				new Point(40.58892817,	-95.74035645),
				new Point(42.51665075,	-96.50115967),
				new Point(43.4887976,	-96.56707764)];


$polygon['MO'] = [new Point(40.59727063,	-95.7019043),
				new Point(40.54720023,	-91.54907227),
				new Point(38.68550976,	-90.14282227),
				new Point(36.7036596,	-89.15405273),
				new Point(36.45663601,	-94.55932617),
				new Point(39.09596294,	-94.73510742)];

$polygon['AR'] = [new Point(36.48314062,-94.59777832),
				new Point(36.46547189,-90.1373291),
				new Point(35.96911508,-90.37902832),
				new Point(35.97800618,-89.75280762),
				new Point(33.67863985,-91.17004395),
				new Point(33.00405687,-91.17553711),
				new Point(33.020179,-94.04296875),
				new Point(33.55055114,-94.04176712),
				new Point(33.623768,-94.49615479),
				new Point(35.38569122,-94.43504333)];

$polygon['MS'] = [new Point(34.97600151,-90.22521973),
				new Point(34.95799531,-88.1817627),
				new Point(31.92419261,-88.47839355),
				new Point(30.15462722,-88.40148926),
				new Point(30.06909396,-89.30236816),
				new Point(30.62845887,-89.8626709),
				new Point(30.98231864,-89.74456787),
				new Point(31.02469413,-91.59851074),
				new Point(32.30802742,-90.90774536),
				new Point(33.00405687,-91.15081787),
				new Point(34.14818102,-90.90911865),
				new Point(34.99175369,-90.29251099)];



$polygon['LA'] = [new Point(33.00405687,-94.01824951),
				new Point(32.98102015,-91.13983154),
				new Point(32.32427559,-90.91461182),
				new Point(31.24098538,-91.60125732),
				new Point(31.01057106,-91.61773682),
				new Point(30.95876857,-89.76928711),
				new Point(30.65209003,-89.8324585),
				new Point(29.82158272,-89.08813477),
				new Point(27.85850395,-88.73657227),
				new Point(29.63077121,-93.92211914),
				new Point(31.14230491,-93.55133057),
				new Point(31.96614386,-94.00726318)];

// $polygon['MS'] = [new Point(34.97600151,-90.28015137),
// 				new Point(34.97600151,-88.14331055),
// 				new Point(31.93351676,-88.45092773),
// 				new Point(30.14512718,-88.36303711),
// 				new Point(30.10711789,-89.26391602),
// 				new Point(30.24957724,-89.62097168),
// 				new Point(30.65681556,-89.82971191),
// 				new Point(30.9964459,-89.74182129),
// 				new Point(31.0058629,-91.60949707),
// 				new Point(32.33355895,-90.97229004),
// 				new Point(33.67863985,-91.17279053)];


$polygon['AL'] = [new Point(34.97600151,-88.14331055),
				new Point(34.93998515,-85.63842773),
				new Point(32.43561304,-84.98748779),
				new Point(30.97760909,-85.04516602),
				new Point(30.98702796,-87.58575439),
				new Point(30.64263826,-87.42095947),
				new Point(30.12612436,-87.48687744),
				new Point(30.15462722,-88.35479736),
				new Point(31.9102046,-88.45916748)];

$polygon['GA'] = [new Point(34.98500313,-85.59997559),
				new Point(34.98050245,-83.11431885),
				new Point(34.69646117,-83.36151123),
				new Point(33.45894275,-81.96075439),
				new Point(31.92419261,-80.67398071),
				new Point(30.77015912,-81.74926758),
				new Point(30.73239273,-84.89135742),
				new Point(32.50049649,-85.03967285)];

$polygon['FL'] = [new Point(30.97760909,-87.55554199),
				new Point(30.98702796,-84.97375488),
				new Point(30.73239273,-84.90783691),
				new Point(30.52441327,-82.23815918),
				new Point(30.35391637,-82.13928223),
				new Point(30.78903675,-81.91955566),
				new Point(30.60009387,-80.27160645),
				new Point(23.46324633,-78.91479492	),
				new Point(30.23059456,-87.48962402)];

$polygon['TN'] = [new Point(36.47430676,-89.46166992),
				new Point(36.49638952,-88.04855347),
				new Point(36.67282489,-88.05953979),
				new Point(36.5802466,-81.61743164),
				new Point(35.77325759,-83.10333252),
				new Point(34.98500313,-84.31732178),
				new Point(34.99400376,-90.29663086)];


$polygon['KY'] = [new Point(36.47430676,-89.41772461),
				new Point(37.80544395,-88.03344727),
				new Point(38.27268854,-85.61645508),
				new Point(39.11301365,-84.69360352),
				new Point(38.68550976,-82.91381836),
				new Point(37.47485808,-82.01293945),
				new Point(36.5802466,-83.57299805),
				new Point(36.61552763,-88.05541992),
				new Point(36.50963616,-88.05267334)];


$polygon['IN'] = [new Point(41.68932226,-87.52807617),
				new Point(41.70572852,-84.82543945),
				new Point(38.85682013,-84.71557617),
				new Point(38.13455658,-85.90209961),
				new Point(37.80544395,-88.03344727),
				new Point(39.06184913,-87.57202148)];


$polygon['IL'] = [new Point(42.48830198,-90.56030273),
				new Point(42.48830198,-87.04467773),
				new Point(41.76311745,-87.48962402),
				new Point(39.01064751,-87.48413086),
				new Point(37.10776507,-88.78051758),
				new Point(37.05517711,-89.39575195),
				new Point(38.46219172,-90.40649414),
				new Point(40.29628652,-91.43920898),
				new Point(41.54147767,-90.56030273),
				new Point(42.08191668,-90.18676758)];

$polygon['WI'] = [new Point(47.279229,-89.98901367),
				new Point(46.66451742,-90.38452148),
				new Point(45.89000816,-87.9675293),
				new Point(45.02695045,-87.63793945),
				new Point(45.46013064,-86.84692383),
				new Point(45.16654716,-86.29760742),
				new Point(42.52069953,-87.02270508),
				new Point(42.48830198,-90.66467285),
				new Point(42.98053955,-91.18103027),
				new Point(43.84245117,-91.2689209),
				new Point(44.76233667,-92.81799316),
				new Point(45.39073515,-92.64221191),
				new Point(45.56214097,-92.77542114),
				new Point(45.57752269,-92.88803101),
				new Point(45.71576868,-92.85507202),
				new Point(45.90147733,-92.70126343),
				new Point(45.98360372, -92.5227356),
				new Point(46.07704131, -92.30026245),
				new Point(46.64943616, -92.28103638),
				new Point(46.65886244, -92.20172882),
				new Point(46.75021206, -92.11280823),
				];

$polygon['MI'] = [new Point(47.93106635,-89.45068359),
				new Point(46.49839226,-90.24169922),
				new Point(45.15105327,-86.33056641),
				new Point(41.73852847,-87.26989746),
				new Point(41.73442939,-84.81170654),
				new Point(41.72623045,-83.42330933),
				new Point(41.95540515,-83.10882568),
				new Point(43.50075244,-82.04040527),
				new Point(47.04018214,-84.49584961),
				new Point(47.96050239,-89.43969727)];

$polygon['OH'] = [new Point(41.72213059,-84.8034668),
				new Point(41.73033005,-83.41369629),
				new Point(41.94723448,-83.09234619),
				new Point(42.27730877,-80.47485352),
				new Point(40.68063803,-80.49682617),
				new Point(39.41922074,-81.04614258),
				new Point(38.39333889,-82.47436523),
				new Point(39.09596294,-84.73754883)];



$polygon['WV'] = [new Point(40.63063008,-80.49133301),
				new Point(39.74943369,-80.50231934),
				new Point(39.71141253,-79.4833374),
				new Point(39.22374274,-79.47784424),
				new Point(39.62261494,-78.77609253),
				new Point(39.6247305,-78.21578979),
				new Point(39.10875136,-78.44512939),
				new Point(38.78834536,78.86810303),
				new Point(38.83542884,-78.99993896),
				new Point(38.42777351,-79.29656982),
				new Point(38.56964281,-79.67010498),
				new Point(37.47049847,-80.43365479),
				new Point(37.20408156,-81.69158936),
				new Point(38.12591463,-82.61169434),
				new Point(38.41163432,-82.58903503),
				new Point(38.4514378,-82.31369019),
				new Point(38.44874906,-82.3260498),
				new Point(38.5954072,-82.2687149),
				new Point(38.60345668,-82.17670441),
				new Point(38.79904888,-82.20897675),
				new Point(39.02131757,-82.01980591),
				new Point(38.93057072,-81.75647736),
				new Point(39.40648883, -81.52679443),
				new Point(39.69028059, -80.88409424),
				new Point(40.54198241, -80.64170837)];



$polygon['VA'] = [new Point(36.58465761,-83.65814209),
				new Point(36.55156889,-75.6930542),
				new Point(38.06539235,-74.71801758),
				new Point(37.9441975,-76.33850098),
				new Point(38.4363796,-77.26135254),
				new Point(38.86323627,-77.03544617),
				new Point(39.13219078,-77.52433777),
				new Point(39.15775215,-77.80929565),
				new Point(39.45104034,-78.3366394),
				new Point(38.80547022,-78.94226074),
				new Point(38.55675715	,-79.61242676),
				new Point(37.40507375,-80.74401855),
				new Point(37.28279465,-81.76574707),
				new Point(37.50972584,-82.0513916)];

$polygon['NC'] = [new Point(36.61552763,-81.67785645),
				new Point(36.57142382,-73.84460449),
				new Point(32.86113232,-77.61291504),
				new Point(33.84304531,-78.5357666),
				new Point(34.80478292,-79.6673584),
				new Point(34.82733206,-80.80169678),
				new Point(34.93660781,-80.78727722),
				new Point(35.09856339,-80.93147278),
				new Point(35.05023525,-81.04545593),
				new Point(35.14686291,-81.03996277),
				new Point(35.19176697,-82.3727417),
				new Point(34.9985037,-83.10333252),
				new Point(34.99400376,-84.30633545),
				new Point(35.48303813,-83.92593384),
				new Point(35.7821707,-83.07037354),
				new Point(36.35052701,-81.76849365)];

$polygon['SC'] = [new Point(33.84304531,-78.52478027),
				new Point(32.0173916,-80.71105957),
				new Point(32.08722871,-81.12579346),
				new Point(32.98562797,-81.51580811),
				new Point(34.45221847,-82.88909912),
				new Point(34.77320375,-83.36700439),
				new Point(34.98500313,-83.10333252),
				new Point(35.18727768,-82.37823486),
				new Point(35.12440158,-81.043396),
				new Point(35.10081052,-80.92735291),
				new Point(34.93435617,-80.78041077),
				new Point(34.82056797,-80.79963684),
				new Point(34.79801697,-79.67422485)];

$polygon['DE'] = [new Point(39.71563813,-75.76721191),
				new Point(39.82646778,-75.64292908),
				new Point(39.8127557,-75.38543701),
				new Point(39.59722324,-75.53375244),
				new Point(39.46164364,-75.52825928),
				new Point(38.46649285,-74.72625732),
				new Point(38.4514378,-75.04966736),
				new Point(38.4611164,-75.69374084)];

$polygon['MD'] = [new Point(39.71141253,-79.47784424),
				new Point(39.71986349,-75.77545166),
				new Point(38.44498467,-75.66833496),
				new Point(38.46649285,-74.4241333),
				new Point(38.01347623,-75.2041626),
				new Point(37.89219555,-76.31652832),
				new Point(38.39549153,-77.02651978),
				new Point(38.4363796,-77.31216431),
				new Point(38.84612529,-77.02102661),
				new Point(39.1151447,-77.49343872),
				new Point(39.31517545,-77.71865845),
				new Point(39.59722324,-77.84225464),
				new Point(39.61838364,-78.77883911),
				new Point(39.21310329,-79.46273804)];

$polygon['PA'] = [new Point(42.03297433, -80.50231934),
				new Point(42.35854392,-79.75524902),
				new Point(41.99624282,-79.76348877),
				new Point(41.95131995,-75.2947998),
				new Point(41.8204551,-75.09155273),
				new Point(41.5085773,-75.00366211),
				new Point(41.35619553,-74.70428467),
				new Point(40.66397288,-75.1739502),
				new Point(40.17047887,-74.76745605),
				new Point(39.69873414,-75.8001709),
				new Point(39.70718666,-80.51879883)
				];


$polygon['NY'] = [new Point(42.55308029,-79.81567383),
				new Point(43.43696597,-79.33227539),
				new Point(45.8441078,-73.35571289),
				new Point(45.01141864,-73.31726074),
				new Point(44.24913397,-73.33099365),
				new Point(43.55252937,-73.24310303),
				new Point(42.74701217,-73.2623291),
				new Point(42.08191668,-73.50128174),
				new Point(41.30050773,-73.54385376),
				new Point(41.2013897,-73.48892212),
				new Point(41.10005163,-73.72409821),
				new Point(41.01202955,-73.65749359),
				new Point(40.98145318,-73.65423203),
				new Point(41.17038448,-71.79016113),
				new Point(40.20405043,-71.93572998),
				new Point(40.51379916,-74.25384521),
				new Point(40.98197154,-73.89678955),
				new Point(41.34382458,-74.69329834),
				new Point(41.96357478,-75.39093018),
				new Point(42.01257056,-79.76623535)];

$polygon['MA'] = [new Point(42.72683915,-73.25408936),
				new Point(42.69252995,-71.29440308),
				new Point(42.90212461,-70.75057983),
				new Point(40.97160353,-69.27703857),
				new Point(41.43449031,-71.09527588),
				new Point(41.66367911,-71.15913391),
				new Point(41.87467384,-71.37199402),
				new Point(42.01665184,-71.38435364),
				new Point(42.04521346,-73.47381592)];

$polygon['CT'] = [new Point(42.04521346,-73.49304199),
				new Point(42.00032515,-71.80389404),
				new Point(41.27367812,-71.80938721),
				new Point(40.95501133,-73.6605835),
				new Point(41.09849932,-73.72478485),
				new Point(41.21585378,-73.49441528),
				new Point(41.29844431,-73.55209351)];


$polygon['RI'] = [new Point(42.01257056,-71.79428101),
				new Point(42.01461123,-71.38504028),
				new Point(41.8930773,71.36238098),
				new Point(41.78360107,-71.32667542),
				new Point(41.65752323,-71.13441467),
				new Point(41.43243113,-71.08634949),
				new Point(41.18278833,-71.7805481),
				new Point(41.30876078,-71.90414429),
				new Point(41.42213425,-71.80252075)];
//******************************************************


$polygon['ME'] = [new Point(45.61403741,-71.0925293),
				new Point(47.96050239,-69.26879883),
				new Point(47.21956811,-66.67602539),
				new Point(43.8503745,-66.80786133),
				new Point(43.03677586,-70.71899414),
				new Point(43.42100883,-70.97991943),
				new Point(45.27488644,-71.09802246)
				];


$polygon['AK'] = [new Point(71.74643172,-164.97070312),
				new Point(71.20191973,-141.04248047),
				new Point(69.64753596,-140.9916687),
				new Point(60.31606837,-141.00952148),
				new Point(59.97700549,-128.54003906),
				new Point(50.23315183,-130.82519531),
				new Point(49.8946344,-178.72558594),
				new Point(71.18775392,-165.76171875)];


$polygon['HI'] = [new Point(22.47195451,-160.49377441),
				new Point(22.58358254,-157.2088623),
				new Point(18.82311695,-154.01184082),
				new Point(18.59418886,-156.82434082),
				new Point(21.80030805,-161.14196777)];



$polygon['NH'] = [new Point(45.3444241,-71.0760498),
				new Point(43.36512573,-70.9854126),
				new Point(42.88803956,-70.48553467),
				new Point(42.67435858,-71.30401611),

				new Point(42.73894375,-72.46307373),
				new Point(42.87193842,-72.55508423),
				new Point(43.62017062,-72.33673096),
				new Point(44.09350315,-72.04147339),
				new Point(44.55133484,-71.61437988),
				new Point(45.29034662,-71.31225186)];


$polygon['NJ'] = [new Point(41.33970041	,-74.71252041),
				new Point(40.994411,-73.89541626),
				new Point(40.66188944,-74.06227112),
				new Point(40.6410515,-74.19685364),
				new Point(40.48455956,-74.2641449),
				new Point(40.325608,-73.62762451),
				new Point(38.52238409,-74.67956543),
				new Point(39.48708498,-75.59417725),
				new Point(39.79798577,-75.42732239),
				new Point(40.15316204,-74.72213345),
				new Point(40.41715556,-75.05756378),
				new Point(40.56911064,-75.10734558),
				new Point(40.56598103,-75.18974304),
				new Point(41.00477542,-75.13961792)];

$polygon['VT'] = [new Point(45.04635929,-73.34197998),
				new Point(45.07352061,-71.49353027),
				new Point(44.52392654,-71.57318115),
				new Point(44.29240109,-72.03872681),
				new Point(43.81074731,-72.18566895),
				new Point(43.69667261,-72.30445862),
				new Point(42.86791248,-72.55645752),
				new Point(42.72885675,-72.45620728),
				new Point(42.74902911,-73.27194214),
				new Point(43.55850078,-73.25820923),
				new Point(43.57641143,-73.42575073),
				new Point(44.17432484,-73.39004517)];

// $polygon[''] = [new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,),
// 				new Point(,)
// 				];












function getState($lat, $lng, $polygon) {
	$keys = array_keys($polygon);
	for ($i=0;$i<count($keys);$i++) {
		if (contains(new Point($lat, $lng), $polygon[$keys[$i]])) {
			return $keys[$i];
		}
	}
	return "UN";
}
 ?>
